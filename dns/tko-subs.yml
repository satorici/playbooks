settings:
  image: golang:latest
  name: tko-subs is a tool that can help you detect and takeover subdomains with dead DNS records
  #example: satori run satori://recon/tko-subs.yml --data='{"DOMAIN": "example.com"}' --output

install:
  assertReturnCode: 0
  update:
    - apt update && apt install -y git
  go_module:
    - go mod init tko-subs-project
  go_packages:
    - go install github.com/bgentry/heroku-go@latest
    - go install github.com/gocarina/gocsv@latest
    - go install github.com/google/go-github/v52@latest
    - go install github.com/olekukonko/tablewriter@latest
    - go install golang.org/x/net/publicsuffix@latest
    - go install golang.org/x/oauth2@latest
    - go install github.com/miekg/dns@latest
  tko_subs:
    - go install github.com/anshumanbh/tko-subs@latest

run:
  assertReturnCode: 0
  help:
    - tko-subs -h
  run:
    - tko-subs -domain ${{DOMAIN}}