settings:
  name: "pytest - unit test for Python"
  image: python

install:
  - python -m venv venv
  - find . -name "*.txt" -path "*req*" -exec venv/bin/pip install -r {} -q --disable-pip-version-check \; 2>/dev/null
  - if [ -f "setup.py" ] || [ -f "pyproject.toml" ]; then venv/bin/pip install -e . -q --disable-pip-version-check 2>/dev/null; fi
  - venv/bin/pip show pytest &>/dev/null || venv/bin/pip install pytest -q --disable-pip-version-check

pytest:
  assertReturnCode: 0
  run:
    - ls -l; venv/bin/pytest -vv --disable-warnings
