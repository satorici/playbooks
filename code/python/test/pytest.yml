settings:
  name: "pytest - unit test for Python"
  image: python

install:
  - find . -name "*.txt" -path "*req*" -exec pip install -r {} -q --disable-pip-version-check --root-user-action=ignore \; 2>/dev/null
  - if [ -f "setup.py" ] || [ -f "pyproject.toml" ]; then pip install -e . -q --disable-pip-version-check --root-user-action=ignore 2>/dev/null; fi
  - pip show pytest &>/dev/null || pip install pytest -q --disable-pip-version-check --root-user-action=ignore

pytest:
  assertReturnCode: 0
  run:
    - ls -l; pytest -vv --disable-warnings
