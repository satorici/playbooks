settings:
  name: "Siege - Load testing web servers"
  description: "Knowing how much traffic your web server can handle when under stress is essential for planning 
                future grow of your website or application. By using tool called siege, you can run a load test 
                on your server and see how your system performs under different circumstances.
                You can use siege to evaluate the amount of data transferred, response time, transaction rate, 
                throughput, concurrency and how many times the server returned responses. 
                The tool has three modes, in which it can operate â€“ regression, internet simulation and brute force.
                Siege must only be ran against servers you own or on such you have explicit permission to test. "
  mitigation: "Use an anti DDoS service such as CloudFlare to prevent network attacks"

install:
  curl:
  - apt install -y curl
  siege:
  - apt install -y siege

host:
  assertReturnCode: 0
  before_siege:
  - curl -s ${{URL}} -m 3
  siege:
  - siege -c 100 -t 30s ${{URL}}
  after_siege:
  - curl -s ${{URL}} -m 3
  results:
  - "set +f; cat siege.*"
